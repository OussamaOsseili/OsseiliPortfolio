<!doctype html>
<html lang="en"
      x-data="win11()"
      x-init="init()"
      :class="theme"
      @mousemove.window="onDrag"
      @mouseup.window="endDrag">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Oussama Osseili — Windows 11 Portfolio</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <!-- Segoe-ish font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --mica-dark: radial-gradient(1200px 800px at 10% -10%, #1b2434 0%, #0f172a 60%, #0b1220 100%);
      --mica-light: radial-gradient(1200px 800px at 10% -10%, #f6f7fb 0%, #e9edf7 60%, #dde3f3 100%);
      --acrylic-dark: rgba(17, 24, 39, .6);
      --acrylic-light: rgba(255, 255, 255, .65);
    }
    html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    body { background: var(--mica-dark) fixed; }
    .light body { background: var(--mica-light) fixed; color: #0b1020; }
    .acrylic { backdrop-filter: blur(18px) saturate(120%); -webkit-backdrop-filter: blur(18px) saturate(120%); }
    .glass-dark { background: var(--acrylic-dark); }
    .glass-light { background: var(--acrylic-light); }
    .w11-window { border-radius: 14px; box-shadow: 0 30px 70px rgba(0,0,0,.35); }
    .w11-title { cursor: move; user-select: none; }
    .w11-btn { width: 36px; height: 28px; border-radius: 8px; }
    .w11-btn:hover { background: rgba(255,255,255,.08); }
    .light .w11-btn:hover { background: rgba(0,0,0,.06); }
    .taskbar { height: 52px; border-top: 1px solid rgba(255,255,255,.08); }
    .light .taskbar { border-top-color: rgba(0,0,0,.08); }
    .task-icon { width: 40px; height: 40px; border-radius: 10px; display: grid; place-items: center; }
    .task-icon:hover { background: rgba(255,255,255,.08); }
    .light .task-icon:hover { background: rgba(0,0,0,.06); }
    .desktop-icon img { filter: drop-shadow(0 8px 20px rgba(0,0,0,.25)); }
    .desktop-icon:hover { transform: translateY(-2px); }
    [x-cloak]{ display:none !important; }
    .dragging { user-select: none !important; }
  </style>
</head>

<body class="min-h-screen text-gray-100 light:text-gray-900">

  <!-- Desktop -->
  <main class="relative h-[100svh] overflow-hidden">

    <!-- Wallpaper vignette -->
    <div class="pointer-events-none absolute inset-0"
         style="background: radial-gradient(1000px 800px at 80% 110%, rgba(255,255,255,.08), rgba(0,0,0,0));"></div>

    <!-- Desktop icons -->
    <section class="absolute inset-0 p-5 grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-6 content-start select-none">
      <!-- About -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('about')" title="About">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/person-12-regular.svg?color=white">
        <span class="text-[13px] text-center">About Me</span>
      </button>

      <!-- Projects -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('projects')" title="Projects">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/apps-24-regular.svg?color=white">
        <span class="text-[13px] text-center">Projects</span>
      </button>

      <!-- Resume (upload resume.pdf to enable) -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink('/OussamaOsseili/resume.pdf')" title="Résumé (PDF)">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/document-24-regular.svg?color=white">
        <span class="text-[13px] text-center">Resume</span>
      </button>

      <!-- GitHub -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink('https://github.com/OussamaOsseili')" title="GitHub">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/mdi/github.svg?color=white">
        <span class="text-[13px] text-center">GitHub</span>
      </button>

      <!-- LinkedIn -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink(linkedin)" title="LinkedIn">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/mdi/linkedin.svg?color=white">
        <span class="text-[13px] text-center">LinkedIn</span>
      </button>

      <!-- Contact -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('contact')" title="Contact">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/mail-24-regular.svg?color=white">
        <span class="text-[13px] text-center">Contact</span>
      </button>

      <!-- Sections -->
      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('data')" title="Data & AI">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/data-area-24-regular.svg?color=white">
        <span class="text-[13px] text-center">Data & AI</span>
      </button>

      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('devops')" title="Cloud & DevOps">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/mdi/docker.svg?color=white">
        <span class="text-[13px] text-center">Cloud & DevOps</span>
      </button>

      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('erp')" title="ERP / BPMN">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/branch-fork-24-regular.svg?color=white">
        <span class="text-[13px] text-center">ERP / BPMN</span>
      </button>

      <button class="desktop-icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('sports')" title="Sports Analytics">
        <img class="w-12 h-12" alt="" src="https://api.iconify.design/fluent/sport-soccer-24-regular.svg?color=white">
        <span class="text-[13px] text-center">Sports Analytics</span>
      </button>
    </section>

    <!-- Windows -->
    <template x-for="w in windows" :key="w.id">
      <section x-show="w.open"
               class="w11-window acrylic absolute overflow-hidden border border-white/10 light:border-black/10"
               :class="theme==='light' ? 'glass-light' : 'glass-dark'"
               :style="{left:w.x+'px', top:w.y+'px', width:w.w+'px', height:w.h+'px', zIndex:w.z}"
               @mousedown="focus(w.id)">

        <!-- Titlebar (bigger avatar) -->
        <div class="w11-title px-3 py-2 flex items-center justify-between bg-white/5 light:bg-black/[.04]"
             @mousedown.prevent="startDrag($event, w.id)">
          <div class="flex items-center gap-3">
            <img src="avatar.jpg" alt="" class="w-10 h-10 rounded-lg object-cover bg-white/10 light:bg-black/10" onerror="this.style.display='none'">
            <h3 class="font-medium text-sm md:text-base" x-text="w.title"></h3>
          </div>
          <div class="flex items-center">
            <button class="w11-btn" title="Minimize" @click.stop="minimize(w.id)">&#8211;</button>
            <button class="w11-btn" title="Maximize" @click.stop="maximize(w.id)">&#9723;</button>
            <button class="w11-btn" title="Close"     @click.stop="close(w.id)">&#10005;</button>
          </div>
        </div>

        <!-- Window content -->
        <div class="p-4 overflow-auto h-[calc(100%-44px)] text-sm leading-relaxed">
          <!-- About -->
          <div x-show="w.key==='about'">
            <div class="flex items-center gap-4">
              <!-- Bigger portrait -->
             <img src="avatar.jpg" alt="Oussama Osseili" class="w-28 h-28 rounded-2xl object-cover" onerror="this.style.display='none'">
              <div>
                <h4 class="text-xl font-semibold">Oussama Osseili</h4>
                <p class="opacity-80">Final-year MIAGE engineering student — EMSI Rabat</p>
                <p class="opacity-70 text-xs">+212 6 24 74 66 25 • <a class="underline" :href="`mailto:${email}`" x-text="email"></a></p>
              </div>
            </div>

            <h5 class="mt-5 font-semibold">Core Skills</h5>
            <ul class="mt-2 grid sm:grid-cols-2 gap-2">
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]"><b>Languages:</b> Python, Java, C, C++, SQL, JavaScript</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]"><b>Frameworks/Technos:</b> Angular, Flask, J2EE, .NET, Spring Boot</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]"><b>Databases:</b> Oracle, MySQL, SQL Server, SQLite</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]"><b>Tools:</b> Git, GitHub, Docker, Unix/Linux</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]"><b>Methods:</b> MVC, Agile/Scrum, DevOps</li>
            </ul>

            <h5 class="mt-5 font-semibold">Languages</h5>
            <p class="opacity-90">Arabic (Native) • French (Fluent) • English (Fluent) • German (Beginner)</p>

            <h5 class="mt-5 font-semibold">Education</h5>
            <ul class="mt-2 space-y-2">
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">
                <b>EMSI — Rabat</b> · MIAGE Engineering (2021–2026)
              </li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">
                <b>Université Ibn Tofail — FSJES Kénitra</b> · Economics (2019–2021)
              </li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">
                <b>Groupe Scolaire Les Mimosas du Gharb</b> · Baccalauréat Scientifique (2018–2019)
              </li>
            </ul>

            <!-- Certifications now boxed like Education -->
            <h5 class="mt-5 font-semibold">Certifications</h5>
            <ul class="mt-2 grid sm:grid-cols-2 gap-2">
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Oracle Database 19c Administration</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Programming for Everybody (Python)</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Software Design & Project Management</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Virtual Networks in Microsoft Azure</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Java as a Second Language</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Introduction to Git & GitHub</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">Docker, Kubernetes & OpenShift</li>
              <li class="p-2 rounded-xl bg-white/5 light:bg-black/[.04]">React Basics</li>
            </ul>
          </div>

          <!-- Projects -->
          <div x-show="w.key==='projects'">
            <h4 class="text-lg font-semibold">Projects</h4>
            <div class="mt-3 grid md:grid-cols-2 gap-3">
              <template x-for="p in projects" :key="p.title">
                <article class="p-3 rounded-xl bg-white/5 light:bg-black/[.04] border border-white/10 light:border-black/10">
                  <h5 class="font-medium" x-text="p.title"></h5>
                  <p class="opacity-90 mt-1" x-text="p.desc"></p>
                  <p class="opacity-70 mt-1 text-xs" x-text="'Stack: ' + p.stack"></p>
                  <div class="mt-2 flex flex-wrap gap-2">
                    <template x-if="p.repo"><a class="px-3 py-1.5 rounded-lg border border-white/10 light:border-black/10 hover:bg-white/10 light:hover:bg-black/[.06]" :href="p.repo" target="_blank">Repository</a></template>
                    <template x-if="p.demo"><a class="px-3 py-1.5 rounded-lg border border-white/10 light:border-black/10 hover:bg-white/10 light:hover:bg-black/[.06]" :href="p.demo" target="_blank">Live Demo</a></template>
                  </div>
                </article>
              </template>
            </div>

            <!-- Experience -->
<h5 class="mt-5 font-semibold">Experience</h5>
<div class="mt-2 grid md:grid-cols-2 gap-3">
  <!-- ONEE -->
  <div class="p-3 rounded-xl bg-white/5 light:bg-black/[.04] border border-white/10 light:border-black/10">
    <b>Project Intern — Office National de l’Électricité et de l’Eau Potable (ONEE), Branche Électricité</b>
    <span class="opacity-70"> • juil. 2025 – sept. 2025 · 3 mois · Maroc · Sur site</span>
    <p class="opacity-90 mt-2">
      Plateforme web de <b>maintenance des postes HTB</b> pour remplacer le suivi Excel.
    </p>
    <ul class="mt-2 list-disc ml-5 space-y-1 opacity-90">
      <li>RBAC (authentification, rôles : Admin, Chef Maintenance, Chef Contrôle…)</li>
      <li>Gestion équipements (CRUD, catégories, états Vert/Jaune/Rouge, historique)</li>
      <li>Planification (calendrier, ordres de travail, priorités)</li>
      <li>Import Excel (.xlsx) via <b>Apache POI</b>, validation & logs</li>
      <li>Reporting PDF, dashboards, <b>schéma unifilaire</b> interactif</li>
    </ul>
    <p class="opacity-80 text-xs mt-2">
      Stack : <b>Spring Boot 3.5.4 (Java 17, JPA, SQLite, REST)</b> · <b>React (Vite)</b>, Tailwind, Axios, React Router
    </p>
  </div>

  <!-- PROWED -->
  <div class="p-3 rounded-xl bg-white/5 light:bg-black/[.04] border border-white/10 light:border-black/10">
    <b>Python Full-Stack Developer (Django/Flask) — PROWED Media SARL</b>
    <span class="opacity-70"> • 4 semaines</span>
    <p class="opacity-90 mt-2">
      Développement et amélioration de plateformes internes ; supervision temps réel et centralisation des données pour optimiser ventes & opérations.
    </p>
    <p class="opacity-80 text-xs mt-2">
      Stack : <b>Django / Flask</b>, Python, JS, Git, Docker
    </p>
  </div>
</div>


          <!-- Contact -->
          <div x-show="w.key==='contact'">
            <h4 class="text-lg font-semibold">Contact</h4>
            <div class="mt-3 flex flex-col sm:flex-row gap-3">
              <input class="flex-1 px-3 py-2 rounded-lg bg-white/10 light:bg-black/[.04] border border-white/10 light:border-black/10"
                     :value="email" readonly>
              <button class="px-3 py-2 rounded-lg bg-emerald-600 hover:opacity-90"
                      @click="copy(email)">Copy Email</button>
              <a class="px-3 py-2 rounded-lg border border-white/10 light:border-black/10 hover:bg-white/10 light:hover:bg-black/[.06]"
                 :href="linkedin" target="_blank">LinkedIn</a>
              <a class="px-3 py-2 rounded-lg border border-white/10 light:border-black/10 hover:bg-white/10 light:hover:bg-black/[.06]"
                 href="https://github.com/OussamaOsseili" target="_blank">GitHub</a>
            </div>
            <p class="mt-2 opacity-80 text-sm">Phone: +212 6 24 74 66 25</p>
          </div>

          <!-- Sections -->
          <div x-show="w.key==='data'">
            <h4 class="text-lg font-semibold">Data & AI</h4>
            <p class="mt-2 opacity-90">ETL with Pandas, EDA dashboards, and baseline ML (scikit-learn).</p>
          </div>
          <div x-show="w.key==='devops'">
            <h4 class="text-lg font-semibold">Cloud & DevOps</h4>
            <p class="mt-2 opacity-90">Docker & Compose, CI/CD with GitHub Actions, basic cloud deploys.</p>
          </div>
          <div x-show="w.key==='erp'">
            <h4 class="text-lg font-semibold">ERP / BPMN</h4>
            <p class="mt-2 opacity-90">Order-to-cash, roles & controls, mock ERP data model.</p>
          </div>
          <div x-show="w.key==='sports'">
            <h4 class="text-lg font-semibold">Sports Analytics</h4>
            <p class="mt-2 opacity-90">xG baseline + calibration • xT heatmaps • player similarity demo.</p>
          </div>
        </div>
      </section>
    </template>

    <!-- Start menu (bigger avatar) -->
    <div x-show="startOpen" x-transition x-cloak
         class="absolute left-1/2 -translate-x-1/2 bottom-[68px] w-[700px] max-w-[90vw] acrylic"
         :class="theme==='light' ? 'glass-light' : 'glass-dark'"
         style="border-radius: 16px; border: 1px solid rgba(255,255,255,.1);"
         @click.outside="startOpen=false">
      <div class="p-4">
        <div class="flex items-center gap-3 rounded-[24px] bg-white/10 light:bg-black/[.06] px-4 py-2 border border-white/10 light:border-black/10">
          <svg width="18" height="18" viewBox="0 0 24 24" class="opacity-80"><path fill="currentColor" d="M11 18a7 7 0 1 1 7-7a7 7 0 0 1-7 7m8.7 2.3L17 17.6"/></svg>
          <input placeholder="Type to search…" class="flex-1 bg-transparent outline-none placeholder:opacity-60">
        </div>

        <h5 class="mt-4 text-sm opacity-80">Pinned</h5>
        <div class="mt-2 grid grid-cols-6 gap-3 text-[13px]">
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('about')">
            <img class="w-10 h-10 rounded-md object-cover" src="avatar.jpg"
                 onerror="this.src='https://api.iconify.design/fluent/person-12-regular.svg?color=white'"><span>About</span>
          </button>
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('projects')">
            <img class="w-7 h-7" src="https://api.iconify.design/fluent/apps-24-regular.svg?color=white"><span>Projects</span>
          </button>
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('data')">
            <img class="w-7 h-7" src="https://api.iconify.design/fluent/data-area-24-regular.svg?color=white"><span>Data</span>
          </button>
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('devops')">
            <img class="w-7 h-7" src="https://api.iconify.design/mdi/docker.svg?color=white"><span>DevOps</span>
          </button>
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('erp')">
            <img class="w-7 h-7" src="https://api.iconify.design/fluent/branch-fork-24-regular.svg?color=white"><span>ERP</span>
          </button>
          <button class="flex flex-col items-center gap-1 task-icon" @click="openApp('sports')">
            <img class="w-7 h-7" src="https://api.iconify.design/fluent/sport-soccer-24-regular.svg?color=white"><span>Sports</span>
          </button>
        </div>

        <div class="mt-4 flex items-center justify-between">
          <div class="flex items-center gap-3">
            <img src="avatar.jpg" alt="" class="w-12 h-12 rounded-xl object-cover bg-white/10 light:bg-black/[.06]" onerror="this.style.display='none'">
            <div>
              <div class="font-medium leading-tight">Oussama Osseili</div>
              <div class="text-xs opacity-70">MIAGE — EMSI Rabat</div>
            </div>
          </div>
          <button class="px-3 py-1.5 rounded-lg border border-white/10 light:border-black/10 hover:bg-white/10 light:hover:bg-black/[.06]"
                  @click="toggleTheme">Toggle theme</button>
        </div>
      </div>
    </div>

    <!-- Taskbar -->
    <footer class="taskbar acrylic absolute bottom-0 left-0 right-0"
            :class="theme==='light' ? 'glass-light' : 'glass-dark'">
      <div class="max-w-6xl mx-auto h-full px-3 flex items-center justify-between gap-3">
        <div class="flex-1"></div>

        <!-- Center group -->
        <div class="flex items-center gap-2">
          <!-- Start button -->
          <button class="task-icon" @click="startOpen=!startOpen" :aria-pressed="startOpen">
            <svg width="22" height="22" viewBox="0 0 48 48"><path fill="currentColor" d="M22 6v16H6V8.7zm20 0v18H24V6zM22 26v16L6 39.3V26zm20 0v16H24V26z"/></svg>
          </button>
          <!-- Pinned -->
          <button class="task-icon" title="File Explorer (Projects)" @click="openApp('projects')">
            <img class="w-6 h-6" src="https://api.iconify.design/fluent/folder-24-regular.svg?color=white">
          </button>
          <button class="task-icon" title="About" @click="openApp('about')">
            <img class="w-6 h-6" src="https://api.iconify.design/fluent/person-12-regular.svg?color=white">
          </button>
          <button class="task-icon" title="Contact" @click="openApp('contact')">
            <img class="w-6 h-6" src="https://api.iconify.design/fluent/mail-24-regular.svg?color=white">
          </button>
        </div>

        <!-- Tray -->
        <div class="flex-1 flex items-center justify-end gap-3 text-sm">
          <div class="px-3 py-1 rounded-lg bg-white/10 light:bg-black/[.06] border border-white/10 light:border-black/10">
            <span x-text="now"></span>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script>
    function win11(){
      return {
        // state
        theme: (localStorage.getItem('theme') || 'dark'),
        startOpen: false,
        now: '',
        z: 10,
        email: 'osseilioussamabusi@gmail.com',
        linkedin: 'https://www.linkedin.com/in/oussama-osseili',

        // windows registry
        windows: [
          { id:1, key:'about',    title:'About — Oussama Osseili', x:120, y:100, w:680, h:500, z:1, open:true,  minimized:false, max:false, prev:null },
          { id:2, key:'projects', title:'Projects',                 x:220, y:160, w:820, h:520, z:1, open:false, minimized:false, max:false, prev:null },
          { id:3, key:'contact',  title:'Contact',                  x:260, y:200, w:640, h:300, z:1, open:false, minimized:false, max:false, prev:null },
          { id:4, key:'data',     title:'Data & AI',                x:300, y:180, w:580, h:320, z:1, open:false, minimized:false, max:false, prev:null },
          { id:5, key:'devops',   title:'Cloud & DevOps',           x:340, y:220, w:580, h:320, z:1, open:false, minimized:false, max:false, prev:null },
          { id:6, key:'erp',      title:'ERP / BPMN',               x:380, y:240, w:580, h:320, z:1, open:false, minimized:false, max:false, prev:null },
          { id:7, key:'sports',   title:'Sports Analytics',         x:420, y:200, w:580, h:340, z:1, open:false, minimized:false, max:false, prev:null },
        ],

        // your real projects (demo ones removed)
        projects: [
          {
            title:'Plateforme maintenance HTB — ONEE (Stage 4ᵉ année)',
            stack:'Spring Boot 3.5.4 (Java 17, JPA, SQLite, REST) · React (Vite), Tailwind, Axios, React Router',
            desc:'Remplacement du suivi Excel par une app web moderne : RBAC, gestion équipements, planning, import Excel (Apache POI), reporting PDF, dashboards, schéma unifilaire.',
            repo:'', demo:''
          },
          {
            title:'Plateforme achat/vente voiture',
            stack:'Django, Python, JS, HTML, PHP',
            desc:'Gestion ventes/achats avec supervision temps réel et centralisation des données.',
            repo:'', demo:''
          },
          {
            title:'Application de E-learning',
            stack:'Python, Flask',
            desc:'Plateforme d’apprentissage avec personnalisation, accessibilité et collaboration.',
            repo:'', demo:''
          },
          {
            title:'Application de gestion de restaurant',
            stack:'Python, Flask',
            desc:'Gestion commandes + rôles (client, serveur, admin) et back-office.',
            repo:'', demo:''
          },
          {
            title:'Gestion Pharmacie',
            stack:'.NET (ASP.NET/Blazor)',
            desc:'Suivi stocks, patients & médicaments; optimisation des ventes et traçabilité.',
            repo:'', demo:''
          },
          {
            title:'Gestion Bibliothèque',
            stack:'Java, J2EE, Spring',
            desc:'Prêts/retours, réservations, centralisation ouvrages/adhérents.',
            repo:'', demo:''
          }
        ],

        // lifecycle
        init(){
          document.documentElement.classList.toggle('light', this.theme==='light');
          this.tick(); setInterval(()=>this.tick(), 1000);
        },
        tick(){
          const d = new Date();
          this.now = `${String(d.getHours()).padStart(2,'0')}:${String(d.getMinutes()).padStart(2,'0')}`;
        },
        toggleTheme(){
          this.theme = (this.theme==='dark') ? 'light' : 'dark';
          localStorage.setItem('theme', this.theme);
          document.documentElement.classList.toggle('light', this.theme==='light');
        },
        openLink(url){ window.open(url, '_blank'); },

        // window actions
        openApp(key){
          const w=this.windows.find(x=>x.key===key); if(!w) return;
          w.open=true; w.minimized=false; this.focus(w.id);
        },
        close(id){ const w=this.windows.find(x=>x.id===id); if(!w) return; w.open=false; w.minimized=false; w.max=false; },
        minimize(id){ const w=this.windows.find(x=>x.id===id); if(!w) return; w.minimized=true; w.open=false; },
        maximize(id){
          const w=this.windows.find(x=>x.id===id); if(!w) return;
          if(!w.max){
            w.prev = {x:w.x, y:w.y, w:w.w, h:w.h};
            w.x=12; w.y=12; w.w=window.innerWidth-24; w.h=window.innerHeight-24-52;
            w.max=true; this.focus(id);
          } else {
            const p=w.prev||{x:100,y:100,w:600,h:400};
            w.x=p.x; w.y=p.y; w.w=p.w; w.h=p.h; w.max=false; this.focus(id);
          }
        },
        focus(id){ const w=this.windows.find(x=>x.id===id); if(!w) return; this.z+=1; w.z=this.z; },

        // dragging (fixed)
        dragState:null,
        startDrag(e,id){
          const w=this.windows.find(x=>x.id===id); if(!w || w.max) return;
          this.focus(id);
          this.dragState = { id, offX:e.clientX-w.x, offY:e.clientY-w.y };
          document.body.classList.add('dragging');
        },
        onDrag(e){
          if(!this.dragState) return;
          const w = this.windows.find(x=>x.id===this.dragState.id); if(!w) return;
          const nx = e.clientX - this.dragState.offX;
          const ny = e.clientY - this.dragState.offY;
          const maxX = window.innerWidth - 120;
          const maxY = window.innerHeight - 120;
          w.x = Math.max(-w.w+160, Math.min(nx, maxX));
          w.y = Math.max(0, Math.min(ny, maxY));
        },
        endDrag(){
          if(!this.dragState) return;
          this.dragState = null;
          document.body.classList.remove('dragging');
        },

        copy(text){ navigator.clipboard.writeText(text); alert('Copied to clipboard!'); },
      }
    }
  </script>
</body>
</html>
