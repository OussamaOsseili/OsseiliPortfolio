<!doctype html>
<html lang="en" x-data="desktopApp()" x-init="init()" :class="theme">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Oussama Osseili — Desktop Portfolio</title>

  <!-- Tailwind (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

  <style>
    /* Desktop wallpaper */
    body { background: linear-gradient(135deg,#0f172a 0%,#1e293b 40%,#0b1020 100%) fixed; }
    .dark body { background: linear-gradient(135deg,#020617 0%,#0b1226 40%,#000 100%) fixed; }
    /* App windows */
    .window { box-shadow: 0 20px 50px rgba(0,0,0,.35); }
    .titlebar { cursor: move; user-select: none; }
    /* Icon glow */
    .icon:hover { transform: translateY(-2px); }
    .icon img { filter: drop-shadow(0 6px 16px rgba(0,0,0,.2)); }
    /* Prevent text selection during drag */
    .dragging { user-select: none; }
    /* Taskbar blur */
    .glass { backdrop-filter: blur(10px); background: rgba(15,23,42,.6); }
    .light .glass { background: rgba(255,255,255,.55); }
    /* Hide while Alpine mounts */
    [x-cloak]{ display:none !important; }
  </style>
</head>

<body class="min-h-screen text-gray-100 selection:bg-indigo-600/60 selection:text-white light:text-gray-900 light:bg-gray-200">

  <!-- Desktop area -->
  <main class="relative h-[100svh] overflow-hidden">
    <!-- Desktop icons -->
    <section class="absolute inset-0 p-6 grid grid-cols-4 sm:grid-cols-6 lg:grid-cols-8 gap-6 content-start">
      <!-- ABOUT -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('about')" title="About Me">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-mdl2/contact.svg?color=white">
        <span class="text-xs text-center">About Me</span>
      </button>

      <!-- PROJECTS -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('projects')" title="Projects">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-mdl2/source-control.svg?color=white">
        <span class="text-xs text-center">Projects</span>
      </button>

      <!-- RESUME -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink('/OussamaOsseili/resume.pdf')" title="Resume (PDF)">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-mdl2/document-pdf.svg?color=white">
        <span class="text-xs text-center">Resume</span>
      </button>

      <!-- GITHUB -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink('https://github.com/OussamaOsseili')" title="GitHub">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/mdi/github.svg?color=white">
        <span class="text-xs text-center">GitHub</span>
      </button>

      <!-- LINKEDIN -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openLink(linkedin)" title="LinkedIn">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/mdi/linkedin.svg?color=white">
        <span class="text-xs text-center">LinkedIn</span>
      </button>

      <!-- CONTACT -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('contact')" title="Contact">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-mdl2/mail.svg?color=white">
        <span class="text-xs text-center">Contact</span>
      </button>

      <!-- OPTIONAL AREAS -->
      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('sports')" title="Sports Analytics">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-emoji/soccer-ball.svg?color=white">
        <span class="text-xs text-center">Sports Analytics</span>
      </button>

      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('erp')" title="ERP / BPMN">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/fluent-mdl2/process.svg?color=white">
        <span class="text-xs text-center">ERP / BPMN</span>
      </button>

      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('devops')" title="Cloud & DevOps">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/mdi/docker.svg?color=white">
        <span class="text-xs text-center">Cloud & DevOps</span>
      </button>

      <button class="icon flex flex-col items-center gap-2 transition"
              @dblclick="openApp('data')" title="Data & AI">
        <img alt="" class="w-12 h-12" src="https://api.iconify.design/mdi/chart-box.svg?color=white">
        <span class="text-xs text-center">Data & AI</span>
      </button>
    </section>

    <!-- Windows (apps) -->
    <template x-for="w in windows" :key="w.id">
      <section x-show="w.open"
               :style="{left:w.x+'px', top:w.y+'px', width:w.w+'px', height:w.h+'px', zIndex:w.z}"
               class="window absolute rounded-lg overflow-hidden border border-white/10 bg-slate-900/90 light:bg-white/90 text-gray-100 light:text-gray-900"
               @mousedown="focusWindow(w.id)">

        <!-- Title bar -->
        <div class="titlebar flex items-center justify-between px-3 py-2 bg-slate-800/70 light:bg-gray-100"
             @mousedown.prevent="startDrag($event, w.id)">
          <div class="flex items-center gap-2">
            <div class="w-3 h-3 rounded-full bg-rose-500"></div>
            <div class="w-3 h-3 rounded-full bg-amber-400"></div>
            <div class="w-3 h-3 rounded-full bg-emerald-500"></div>
            <h3 class="ml-2 font-medium text-sm" x-text="w.title"></h3>
          </div>
          <div class="flex items-center gap-1">
            <button class="px-2 py-1 hover:bg-white/10 rounded" @click.stop="minimize(w.id)">—</button>
            <button class="px-2 py-1 hover:bg-white/10 rounded" @click.stop="closeApp(w.id)">✕</button>
          </div>
        </div>

        <!-- Content -->
        <div class="p-4 overflow-auto h-[calc(100%-42px)] text-sm leading-relaxed">
          <!-- About -->
          <div x-show="w.key==='about'">
            <h4 class="text-lg font-semibold">About — Oussama Osseili</h4>
            <p class="mt-2 opacity-90">
              Final-year MIAGE engineering student at EMSI Rabat. I build practical projects across
              <b>Software</b> (web apps, APIs), <b>Data/AI</b> (ETL, EDA, ML basics),
              <b>Cloud/DevOps</b> (Docker, CI/CD), and <b>ERP/BPMN</b>.
            </p>
            <ul class="mt-4 grid sm:grid-cols-2 gap-3">
              <li class="p-3 rounded bg-white/5 light:bg-gray-50 border border-white/10 light:border-gray-200">
                <b>Languages:</b> Python, Java, TypeScript, SQL
              </li>
              <li class="p-3 rounded bg-white/5 light:bg-gray-50 border border-white/10 light:border-gray-200">
                <b>Frameworks:</b> React, NestJS, FastAPI
              </li>
              <li class="p-3 rounded bg-white/5 light:bg-gray-50 border border-white/10 light:border-gray-200">
                <b>Data:</b> Pandas, scikit-learn, Plotly
              </li>
              <li class="p-3 rounded bg-white/5 light:bg-gray-50 border border-white/10 light:border-gray-200">
                <b>DevOps:</b> Docker, GitHub Actions, Linux
              </li>
            </ul>
          </div>

          <!-- Projects -->
          <div x-show="w.key==='projects'">
            <h4 class="text-lg font-semibold">Projects</h4>
            <div class="mt-3 grid md:grid-cols-2 gap-3">
              <article class="p-3 rounded border border-white/10 light:border-gray-200 bg-white/5 light:bg-gray-50">
                <h5 class="font-medium">Full-Stack App (Auth + CRUD)</h5>
                <p class="opacity-90 mt-1">React + NestJS + PostgreSQL · JWT roles · tested API.</p>
                <div class="mt-2 flex gap-2">
                  <a class="px-2 py-1 rounded border hover:bg-white/10 light:hover:bg-gray-100"
                     href="https://github.com/OussamaOsseili" target="_blank">Repo</a>
                </div>
              </article>
              <article class="p-3 rounded border border-white/10 light:border-gray-200 bg-white/5 light:bg-gray-50">
                <h5 class="font-medium">ETL + EDA Notebook</h5>
                <p class="opacity-90 mt-1">Pandas ETL, visual insights, 1-pager PDF.</p>
                <div class="mt-2 flex gap-2">
                  <a class="px-2 py-1 rounded border hover:bg-white/10 light:hover:bg-gray-100"
                     href="https://github.com/OussamaOsseili" target="_blank">Repo</a>
                </div>
              </article>
              <article class="p-3 rounded border border-white/10 light:border-gray-200 bg-white/5 light:bg-gray-50">
                <h5 class="font-medium">CI/CD Pipeline</h5>
                <p class="opacity-90 mt-1">Lint → Test → Build Docker → Publish to GHCR.</p>
                <div class="mt-2 flex gap-2">
                  <a class="px-2 py-1 rounded border hover:bg-white/10 light:hover:bg-gray-100"
                     href="https://github.com/OussamaOsseili" target="_blank">Repo</a>
                </div>
              </article>
              <article class="p-3 rounded border border-white/10 light:border-gray-200 bg-white/5 light:bg-gray-50">
                <h5 class="font-medium">BPMN — Order-to-Cash</h5>
                <p class="opacity-90 mt-1">Process model, roles, risks/controls, mock ERP.</p>
                <div class="mt-2 flex gap-2">
                  <a class="px-2 py-1 rounded border hover:bg-white/10 light:hover:bg-gray-100"
                     href="https://github.com/OussamaOsseili" target="_blank">Repo</a>
                </div>
              </article>
            </div>
          </div>

          <!-- Contact -->
          <div x-show="w.key==='contact'">
            <h4 class="text-lg font-semibold">Contact</h4>
            <div class="mt-3 flex flex-col sm:flex-row gap-3">
              <input class="flex-1 px-3 py-2 rounded border border-white/10 light:border-gray-300 light:bg-white"
                     :value="email" readonly/>
              <button class="px-3 py-2 rounded bg-emerald-600 hover:opacity-90"
                      @click="copy(email)">Copy Email</button>
              <a class="px-3 py-2 rounded border border-white/10 light:border-gray-300 hover:bg-white/10 light:hover:bg-gray-100"
                 :href="linkedin" target="_blank">LinkedIn</a>
              <a class="px-3 py-2 rounded border border-white/10 light:border-gray-300 hover:bg-white/10 light:hover:bg-gray-100"
                 href="https://github.com/OussamaOsseili" target="_blank">GitHub</a>
            </div>
          </div>

          <!-- Sports -->
          <div x-show="w.key==='sports'">
            <h4 class="text-lg font-semibold">Sports Analytics (mini)</h4>
            <ul class="list-disc ml-5 mt-2 space-y-1 opacity-90">
              <li>xG baseline + calibration curve</li>
              <li>xT heatmap for progression value</li>
              <li>Player similarity demo (role comps)</li>
            </ul>
          </div>

          <!-- ERP -->
          <div x-show="w.key==='erp'">
            <h4 class="text-lg font-semibold">ERP & BPMN</h4>
            <p class="mt-2 opacity-90">Simple order-to-cash process with roles (Sales, WH, Finance), data objects, and controls.</p>
          </div>

          <!-- DevOps -->
          <div x-show="w.key==='devops'">
            <h4 class="text-lg font-semibold">Cloud & DevOps</h4>
            <p class="mt-2 opacity-90">Dockerfiles, docker-compose, GitHub Actions CI/CD to ship fast and reliably.</p>
          </div>

          <!-- Data -->
          <div x-show="w.key==='data'">
            <h4 class="text-lg font-semibold">Data & AI</h4>
            <p class="mt-2 opacity-90">ETL with Pandas, EDA reports, and baseline ML with scikit-learn.</p>
          </div>
        </div>
      </section>
    </template>

    <!-- Taskbar -->
    <footer class="absolute bottom-0 left-0 right-0 glass text-sm">
      <div class="max-w-6xl mx-auto px-3 py-2 flex items-center gap-2">
        <!-- Start -->
        <div class="relative">
          <button class="px-3 py-1.5 rounded bg-white/10 light:bg-white/70 text-white light:text-gray-900"
                  @click="startOpen = !startOpen">⊞ Start</button>
          <div x-show="startOpen" x-transition x-cloak
               class="absolute bottom-10 left-0 w-72 p-3 rounded-lg border border-white/10 light:border-gray-200 bg-slate-900/95 light:bg-white shadow-2xl">
            <h4 class="font-semibold mb-2">Apps</h4>
            <div class="grid grid-cols-3 gap-3">
              <button class="flex flex-col items-center gap-1" @click="openApp('about'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/fluent-mdl2/contact.svg?color=white">
                <span class="text-xs">About</span>
              </button>
              <button class="flex flex-col items-center gap-1" @click="openApp('projects'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/fluent-mdl2/source-control.svg?color=white">
                <span class="text-xs">Projects</span>
              </button>
              <button class="flex flex-col items-center gap-1" @click="openApp('contact'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/fluent-mdl2/mail.svg?color=white">
                <span class="text-xs">Contact</span>
              </button>
              <button class="flex flex-col items-center gap-1" @click="openApp('data'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/mdi/chart-box.svg?color=white">
                <span class="text-xs">Data & AI</span>
              </button>
              <button class="flex flex-col items-center gap-1" @click="openApp('devops'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/mdi/docker.svg?color=white">
                <span class="text-xs">DevOps</span>
              </button>
              <button class="flex flex-col items-center gap-1" @click="openApp('erp'); startOpen=false">
                <img class="w-8 h-8" src="https://api.iconify.design/fluent-mdl2/process.svg?color=white">
                <span class="text-xs">ERP/BPMN</span>
              </button>
            </div>
            <div class="mt-3 flex items-center justify-between">
              <button class="px-2 py-1 rounded border border-white/10 light:border-gray-300"
                      @click="toggleTheme">Toggle Theme</button>
              <span x-text="now" class="opacity-80"></span>
            </div>
          </div>
        </div>

        <!-- Taskbar running apps -->
        <div class="flex-1 flex items-center gap-2 overflow-x-auto">
          <template x-for="w in windows.filter(x=>x.minimized || x.open)" :key="'tb'+w.id">
            <button class="px-2 py-1 rounded border border-white/10 light:border-gray-300 hover:bg-white/10 light:hover:bg-gray-100"
                    :class="{'bg-white/10 light:bg-gray-100': w.open && !w.minimized}"
                    @click="toggleFromTaskbar(w.id)">
              <span x-text="w.title"></span>
            </button>
          </template>
        </div>

        <!-- Clock -->
        <div class="px-3 py-1 rounded border border-white/10 light:border-gray-300">
          <span x-text="now"></span>
        </div>
      </div>
    </footer>
  </main>

  <script>
    function desktopApp(){
      return {
        theme: (localStorage.getItem('theme') || 'dark'), // default dark
        startOpen: false,
        z: 10,
        now: '',
        email: 'osseilioussamabusi@gmail.com.com',              // <-- put your email
        linkedin: 'https://www.linkedin.com/in/oussama-osseili', // <-- your LinkedIn

        // windows registry
        windows: [
          { id:1, key:'about',    title:'About Me',         x:80,  y:80,  w:560, h:380, z:1, open:false, minimized:false },
          { id:2, key:'projects', title:'Projects',         x:160, y:120, w:720, h:420, z:1, open:false, minimized:false },
          { id:3, key:'contact',  title:'Contact',          x:200, y:180, w:600, h:260, z:1, open:false, minimized:false },
          { id:4, key:'sports',   title:'Sports Analytics', x:240, y:140, w:520, h:300, z:1, open:false, minimized:false },
          { id:5, key:'erp',      title:'ERP / BPMN',       x:280, y:200, w:520, h:280, z:1, open:false, minimized:false },
          { id:6, key:'devops',   title:'Cloud & DevOps',   x:320, y:160, w:520, h:280, z:1, open:false, minimized:false },
          { id:7, key:'data',     title:'Data & AI',        x:360, y:220, w:520, h:280, z:1, open:false, minimized:false },
        ],

        init(){
          document.documentElement.classList.toggle('light', this.theme==='light');
          this.tick(); setInterval(()=>this.tick(), 1000);
        },
        tick(){
          const d=new Date();
          const hh=String(d.getHours()).padStart(2,'0');
          const mm=String(d.getMinutes()).padStart(2,'0');
          this.now = `${hh}:${mm}`;
        },
        toggleTheme(){
          this.theme = (this.theme==='dark') ? 'light' : 'dark';
          localStorage.setItem('theme', this.theme);
          document.documentElement.classList.toggle('light', this.theme==='light');
        },
        openLink(url){ window.open(url, '_blank'); },

        // Window mgmt
        openApp(key){
          const w=this.windows.find(x=>x.key===key);
          if(!w) return;
          w.open=true; w.minimized=false; this.focusWindow(w.id);
        },
        closeApp(id){
          const w=this.windows.find(x=>x.id===id);
          if(!w) return; w.open=false; w.minimized=false;
        },
        minimize(id){
          const w=this.windows.find(x=>x.id===id);
          if(!w) return; w.minimized=true; w.open=false;
        },
        toggleFromTaskbar(id){
          const w=this.windows.find(x=>x.id===id);
          if(!w) return;
          if(w.open){ this.minimize(id); }
          else { w.open=true; w.minimized=false; this.focusWindow(id); }
        },
        focusWindow(id){
          const w=this.windows.find(x=>x.id===id);
          if(!w) return;
          this.z+=1; w.z=this.z;
        },

        // Drag logic
        dragState:null,
        startDrag(e,id){
          const w=this.windows.find(x=>x.id===id); if(!w) return;
          this.focusWindow(id);
          this.dragState={ id, offsetX:e.clientX - w.x, offsetY:e.clientY - w.y };
          document.body.classList.add('dragging');
          window.addEventListener('mousemove', this.onDrag);
          window.addEventListener('mouseup', this.endDrag);
        },
        onDrag:(e)=>{},
        endDrag:()=>{},

        copy(text){ navigator.clipboard.writeText(text); alert('Copied to clipboard!'); }
      }
    }
  </script>

  <script>
    // attach drag handlers outside Alpine reactivity for performance
    window.addEventListener('alpine:init', () => {
      const ctx = Alpine.$data(document.documentElement);

      ctx.onDrag = (e) => {
        if(!ctx.dragState) return;
        const w = ctx.windows.find(x=>x.id===ctx.dragState.id);
        if(!w) return;
        const nx = e.clientX - ctx.dragState.offsetX;
        const ny = e.clientY - ctx.dragState.offsetY;
        // keep within viewport bounds a bit
        const maxX = window.innerWidth - 120; // allow partial off-screen
        const maxY = window.innerHeight - 80;
        w.x = Math.max(-w.w+120, Math.min(nx, maxX));
        w.y = Math.max(0, Math.min(ny, maxY));
      };

      ctx.endDrag = () => {
        ctx.dragState = null;
        document.body.classList.remove('dragging');
        window.removeEventListener('mousemove', ctx.onDrag);
        window.removeEventListener('mouseup', ctx.endDrag);
      };
    });
  </script>
</body>
</html>
