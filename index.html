<!doctype html>
<html lang="fr" x-data="site()" x-init="init()" :class="theme">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Oussama Osseili — Portfolio</title>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    html { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    .glass { backdrop-filter: blur(14px) saturate(120%); -webkit-backdrop-filter: blur(14px) saturate(120%); }
    .card { transition: transform .2s ease, box-shadow .2s ease; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 20px 50px rgba(0,0,0,.12) }
    [x-cloak]{ display:none !important; }
    .fade-up { opacity:0; transform: translateY(10px); transition: all .6s ease; }
    .fade-up.show { opacity:1; transform: translateY(0); }
    .blob {
      background: radial-gradient(35% 35% at 30% 30%, rgba(99,102,241,.4), rgba(236,72,153,.25) 60%, transparent 70%);
      filter: blur(40px);
    }
  </style>
</head>

<body class="bg-white text-gray-900 dark:bg-gray-950 dark:text-gray-100">

  <!-- Nav -->
  <header class="sticky top-0 z-40 bg-white/70 dark:bg-gray-950/70 border-b border-black/5 dark:border-white/10 glass">
    <div class="max-w-6xl mx-auto px-4 h-14 flex items-center justify-between">
      <a href="#" class="font-semibold">Oussama<span class="text-indigo-600">.</span></a>

      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="#work" class="hover:opacity-80" x-text="t.nav.work"></a>
        <a href="#services" class="hover:opacity-80" x-text="t.nav.services"></a>
        <a href="#about" class="hover:opacity-80" x-text="t.nav.about"></a>
        <a href="#contact" class="hover:opacity-80" x-text="t.nav.contact"></a>

        <button class="px-3 py-1.5 rounded-lg border border-black/10 dark:border-white/10"
                @click="toggleLang()" x-text="lang==='fr'?'EN':'FR'"></button>
        <button class="px-3 py-1.5 rounded-lg border border-black/10 dark:border-white/10" @click="toggleTheme">
          <span x-show="theme==='light'">🌙</span><span x-show="theme==='dark'">☀️</span>
        </button>
        <button class="px-3 py-1.5 rounded-lg bg-indigo-600 text-white hover:opacity-90"
                @click="playOpen=true" x-text="t.nav.play"></button>
      </nav>

      <button class="md:hidden px-3 py-2 rounded-lg border border-black/10 dark:border-white/10" @click="mobile=!mobile">☰</button>
    </div>

    <!-- Mobile menu -->
    <div class="md:hidden px-4 pb-3" x-show="mobile" x-transition>
      <div class="flex flex-col text-sm gap-2">
        <a href="#work" @click="mobile=false" class="py-2" x-text="t.nav.work"></a>
        <a href="#services" @click="mobile=false" class="py-2" x-text="t.nav.services"></a>
        <a href="#about" @click="mobile=false" class="py-2" x-text="t.nav.about"></a>
        <a href="#contact" @click="mobile=false" class="py-2" x-text="t.nav.contact"></a>
        <div class="flex gap-2 mt-2">
          <button class="flex-1 px-3 py-2 rounded-lg border border-black/10 dark:border-white/10"
                  @click="toggleLang()" x-text="lang==='fr'?'EN':'FR'"></button>
          <button class="flex-1 px-3 py-2 rounded-lg border border-black/10 dark:border-white/10" @click="toggleTheme">
            <span x-show="theme==='light'">🌙</span><span x-show="theme==='dark'">☀️</span>
          </button>
          <button class="flex-1 px-3 py-2 rounded-lg bg-indigo-600 text-white" @click="playOpen=true" x-text="t.nav.play"></button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="relative overflow-hidden">
    <div class="absolute -top-24 right-0 w-[520px] h-[520px] blob"></div>
    <div class="absolute -bottom-24 -left-10 w-[520px] h-[520px] blob"></div>

    <div class="max-w-6xl mx-auto px-4 py-14 md:py-20 grid md:grid-cols-2 gap-10 items-center">
      <div class="fade-up" x-intersect="$el.classList.add('show')">
        <h1 class="text-4xl md:text-5xl font-semibold leading-tight">
          <span x-text="t.hero.hello"></span> 👋<br>
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-600 to-fuchsia-500"
                x-text="t.hero.title"></span>
        </h1>
        <p class="mt-4 text-gray-600 dark:text-gray-300" x-text="t.hero.subtitle"></p>

        <div class="mt-6 flex gap-3">
          <a href="#work" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:opacity-90" x-text="t.hero.ctaWork"></a>
          <a href="#contact" class="px-4 py-2 rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5" x-text="t.hero.ctaContact"></a>
        </div>
      </div>

      <!-- Stats / photo -->
      <div class="fade-up" x-intersect="$el.classList.add('show')">
        <div class="rounded-2xl border border-black/10 dark:border-white/10 p-5 glass bg-white/50 dark:bg-gray-900/40">
          <div class="flex items-center gap-4">
            <img src="avatar.jpg" alt="Oussama Osseili" class="w-24 h-24 rounded-2xl object-cover" onerror="this.style.display='none'">
            <div>
              <div class="text-2xl font-semibold" x-text="t.hero.name"></div>
              <div class="text-sm opacity-80">EMSI Rabat — MIAGE (2021–2026)</div>
              <div class="text-xs opacity-70">Python · Java · SQL · Spring Boot · Django/Flask · React · Docker · Git</div>
            </div>
          </div>
          <div class="mt-5 grid grid-cols-3 gap-3 text-center">
            <div class="rounded-xl border border-black/10 dark:border-white/10 py-4">
              <div class="text-2xl font-semibold"><span x-text="c.count1"></span>+</div>
              <div class="text-xs opacity-70" x-text="t.stats.projects"></div>
            </div>
            <div class="rounded-xl border border-black/10 dark:border-white/10 py-4">
              <div class="text-2xl font-semibold"><span x-text="c.count2"></span></div>
              <div class="text-xs opacity-70" x-text="t.stats.years"></div>
            </div>
            <div class="rounded-xl border border-black/10 dark:border-white/10 py-4">
              <div class="text-2xl font-semibold"><span x-text="c.count3"></span></div>
              <div class="text-xs opacity-70" x-text="t.stats.domains"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Work -->
  <section id="work" class="max-w-6xl mx-auto px-4 py-12">
    <div class="flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <h2 class="text-2xl font-semibold" x-text="t.work.title"></h2>
        <p class="text-sm text-gray-600 dark:text-gray-300" x-text="t.work.subtitle"></p>
      </div>
      <div class="flex flex-wrap gap-2">
        <template x-for="cat in categories">
          <button class="px-3 py-1.5 rounded-full border text-sm"
                  :class="filter===cat?'bg-indigo-600 text-white border-indigo-600':'border-black/10 dark:border-white/10'"
                  @click="setFilter(cat)" x-text="cat"></button>
        </template>
        <input type="search" class="px-3 py-1.5 rounded-full border border-black/10 dark:border-white/10"
               :placeholder="t.work.search" x-model="q" @input.debounce.200ms="applyFilters">
      </div>
    </div>

    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
      <template x-for="p in visible" :key="p.title">
        <article class="card rounded-2xl border border-black/10 dark:border-white/10 p-4 bg-white dark:bg-gray-900">
          <div class="flex items-center justify-between">
            <h3 class="font-semibold" x-text="p.title"></h3>
            <span class="text-xs px-2 py-1 rounded-full border border-black/10 dark:border-white/10" x-text="p.area"></span>
          </div>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-300" x-text="p.desc"></p>
          <div class="mt-3 flex flex-wrap gap-2">
            <template x-for="t in p.tech"><span class="text-xs px-2 py-1 rounded-lg bg-gray-100 dark:bg-white/10" x-text="t"></span></template>
          </div>
          <div class="mt-4 flex gap-2">
            <template x-if="p.repo"><a :href="p.repo" target="_blank" class="px-3 py-1.5 text-sm rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5">Repo</a></template>
            <template x-if="p.demo"><a :href="p.demo" target="_blank" class="px-3 py-1.5 text-sm rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg:white/5">Demo</a></template>
          </div>
        </article>
      </template>
    </div>

    <p class="mt-8 text-center text-sm text-gray-500 dark:text-gray-400" x-show="visible.length===0" x-text="t.work.empty"></p>
  </section>

  <!-- Services -->
  <section id="services" class="max-w-6xl mx-auto px-4 py-12">
    <h2 class="text-2xl font-semibold" x-text="t.services.title"></h2>
    <div class="mt-6 grid md:grid-cols-3 gap-6">
      <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900">
        <h3 class="font-semibold" x-text="t.services.software.title"></h3>
        <p class="text-sm opacity-90 mt-2" x-text="t.services.software.desc"></p>
      </div>
      <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900">
        <h3 class="font-semibold" x-text="t.services.data.title"></h3>
        <p class="text-sm opacity-90 mt-2" x-text="t.services.data.desc"></p>
      </div>
      <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900">
        <h3 class="font-semibold" x-text="t.services.devops.title"></h3>
        <p class="text-sm opacity-90 mt-2" x-text="t.services.devops.desc"></p>
      </div>
    </div>
  </section>

  <!-- About -->
  <section id="about" class="max-w-6xl mx-auto px-4 py-12 grid md:grid-cols-2 gap-6 items-start">
    <div class="fade-up" x-intersect="$el.classList.add('show')">
      <h2 class="text-2xl font-semibold" x-text="t.about.title"></h2>
      <p class="mt-3 text-gray-600 dark:text-gray-300" x-text="t.about.bio"></p>

      <h3 class="mt-6 font-semibold" x-text="t.about.education"></h3>
      <ul class="mt-2 space-y-2">
        <li class="p-3 rounded-xl border border-black/10 dark:border-white/10">
          <b>EMSI — Rabat</b> · MIAGE (2021–2026)
        </li>
        <li class="p-3 rounded-xl border border-black/10 dark:border-white/10">
          <b>Université Ibn Tofail — FSJES Kénitra</b> · Économie (2019–2021)
        </li>
      </ul>

      <h3 class="mt-6 font-semibold" x-text="t.about.skills"></h3>
      <p class="mt-2 text-sm opacity-90">Python, Java, C/C++, SQL, Spring Boot, Django/Flask, React, Docker, Git, Linux</p>

      <h3 class="mt-6 font-semibold" x-text="t.about.certs"></h3>
      <ul class="mt-2 grid sm:grid-cols-2 gap-2">
        <li class="p-2 rounded-xl border border-black/10 dark:border-white/10">Oracle Database 19c Admin</li>
        <li class="p-2 rounded-xl border border-black/10 dark:border-white/10">Programming for Everybody (Python)</li>
        <li class="p-2 rounded-xl border border-black/10 dark:border-white/10">Virtual Networks in Azure</li>
        <li class="p-2 rounded-xl border border-black/10 dark:border-white/10">Intro to Git & GitHub</li>
      </ul>
    </div>

    <div class="fade-up" x-intersect="$el.classList.add('show')">
      <div class="p-5 rounded-2xl border border-black/10 dark:border-white/10 bg-white dark:bg-gray-900">
        <h3 class="font-semibold" x-text="t.about.experience"></h3>
        <!-- ONEE -->
        <div class="mt-3 p-3 rounded-xl border border-black/10 dark:border-white/10">
          <b>Project Intern — ONEE, Branche Électricité</b>
          <span class="opacity-70"> • juil. 2025 – sept. 2025 · Maroc · Sur site</span>
          <p class="mt-2 text-sm opacity-90">Plateforme web de <b>maintenance HTB</b> remplaçant le suivi Excel.</p>
          <ul class="mt-2 list-disc ml-5 text-sm opacity-90 space-y-1">
            <li>RBAC (authentification & rôles)</li><li>Gestion équipements & statuts</li>
            <li>Planification & ordres de travail</li><li>Import Excel (Apache POI) + logs</li>
            <li>Reporting PDF & dashboards, schéma unifilaire</li>
          </ul>
          <p class="opacity-70 text-xs mt-2">Stack: Spring Boot 3.5.4 (Java 17, JPA, SQLite, REST) · React (Vite), Tailwind, Axios</p>
        </div>
        <!-- PROWED -->
        <div class="mt-3 p-3 rounded-xl border border-black/10 dark:border-white/10">
          <b>Python Full-Stack — PROWED Media SARL</b>
          <span class="opacity-70"> • 4 semaines</span>
          <p class="mt-2 text-sm opacity-90">Plateformes internes; supervision temps réel & centralisation des données.</p>
          <p class="opacity-70 text-xs mt-2">Stack: Django/Flask, Python, JS, Git, Docker</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact -->
  <section id="contact" class="max-w-6xl mx-auto px-4 py-12">
    <div class="rounded-2xl border border-black/10 dark:border-white/10 p-6 glass bg-white/50 dark:bg-gray-900/40">
      <div class="grid md:grid-cols-2 gap-6 items-center">
        <div>
          <h2 class="text-2xl font-semibold" x-text="t.contact.title"></h2>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-300" x-text="t.contact.desc"></p>
          <div class="mt-4 flex flex-wrap gap-3">
            <a :href="`mailto:${email}`" class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:opacity-90" x-text="email"></a>
            <a :href="linkedin" target="_blank" class="px-4 py-2 rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5">LinkedIn</a>
            <a href="https://github.com/OussamaOsseili" target="_blank" class="px-4 py-2 rounded-lg border border-black/10 dark:border-white/10 hover:bg-black/5 dark:hover:bg-white/5">GitHub</a>
          </div>
        </div>
        <form class="space-y-3" @submit.prevent="alert(t.contact.sent)">
          <input class="w-full px-3 py-2 rounded-lg border border-black/10 dark:border-white/10" :placeholder="t.contact.form.name" required>
          <input class="w-full px-3 py-2 rounded-lg border border-black/10 dark:border-white/10" :placeholder="t.contact.form.email" type="email" required>
          <textarea class="w-full px-3 py-2 rounded-lg border border-black/10 dark:border-white/10" rows="4" :placeholder="t.contact.form.msg" required></textarea>
          <button class="px-4 py-2 rounded-lg bg-indigo-600 text-white hover:opacity-90" x-text="t.contact.form.send"></button>
        </form>
      </div>
    </div>
    <p class="mt-6 text-center text-xs opacity-70">© <span x-text="year"></span> Oussama Osseili — Hosted on GitHub Pages</p>
  </section>

  <!-- Play modal -->
  <div x-show="playOpen" x-transition x-cloak class="fixed inset-0 z-50 grid place-items-center">
    <div class="absolute inset-0 bg-black/50" @click="playOpen=false"></div>
    <div class="relative w-[min(680px,92vw)] rounded-2xl border border-white/10 glass bg-gray-900/70 p-5 text-white">
      <div class="flex items-center justify-between">
        <h3 class="font-semibold" x-text="t.play.title"></h3>
        <button class="text-2xl leading-none" @click="playOpen=false">×</button>
      </div>
      <p class="opacity-80 mt-1" x-text="t.play.desc"></p>
      <canvas id="game" class="mt-4 w-full h-56 rounded-xl bg-black/30 border border-white/10"></canvas>
      <div class="mt-3 flex gap-2">
        <button class="px-3 py-2 rounded-lg bg-indigo-600 hover:opacity-90" @click="gameStart()" x-text="t.play.start"></button>
        <button class="px-3 py-2 rounded-lg border border-white/10 hover:bg-white/10" @click="gamePause()" x-text="t.play.pause"></button>
      </div>
    </div>
  </div>

  <script>
    function site(){
      return {
        theme: (localStorage.getItem('theme') || 'light'),
        lang: 'fr',
        mobile: false,
        email: 'osseilioussamabusi@gmail.com',
        linkedin: 'https://www.linkedin.com/in/oussama-osseili',
        year: new Date().getFullYear(),
        playOpen: false,

        // COUNTERS
        c: {count1:0,count2:0,count3:0},
        target: {count1:6, count2:5, count3:4}, // adjust
        counterSeen:false,

        // WORK
        q:'',
        filter:'Tous',
        categories: ['Tous','Software','Data/AI','Cloud/DevOps','ERP/BPMN','Sports'],
        projects: [
          { title:'Maintenance HTB — ONEE', area:'Software', tech:['Spring Boot','React','SQLite'], desc:'App web pour remplacer le suivi Excel: RBAC, équipements, planning, import Excel, reporting.', repo:'', demo:'' },
          { title:'Achat/Vente voiture', area:'Software', tech:['Django','JS'], desc:'Gestion ventes/achats avec supervision et centralisation des données.', repo:'', demo:'' },
          { title:'E-learning', area:'Software', tech:['Flask','Python'], desc:'Plateforme d’apprentissage — personnalisation & collaboration.', repo:'', demo:'' },
          { title:'Restaurant Manager', area:'Software', tech:['Flask','Python'], desc:'Commandes, rôles et back-office.', repo:'', demo:'' },
          { title:'ERP/BPMN — Order-to-Cash', area:'ERP/BPMN', tech:['BPMN','SQL'], desc:'Processus, rôles & contrôles; schéma de données ERP.', repo:'', demo:'' },
          { title:'Data Mini — xG/xT', area:'Sports', tech:['Pandas','sklearn','mplsoccer'], desc:'xG logistic + calibration • xT heatmaps (données publiques).', repo:'', demo:'' },
          { title:'ETL + EDA Retail', area:'Data/AI', tech:['Pandas','Plotly'], desc:'Pipeline ETL et EDA reproductible avec rapport.', repo:'', demo:'' },
          { title:'CI/CD Demo', area:'Cloud/DevOps', tech:['Docker','GH Actions'], desc:'Lint → Test → Build → Push → Deploy.', repo:'', demo:'' },
        ],
        visible: [],

        // i18n text
        t:{},
        dict:{
          fr:{
            nav:{work:'Projets',services:'Services',about:'À propos',contact:'Contact',play:'Jouer'},
            hero:{
              hello:'Bienvenue à l’atelier',
              title:'MIAGE — Software · Data/AI · Cloud/DevOps · ERP',
              subtitle:'Je construis des projets propres, documentés et reproductibles — du back Spring/Django aux pipelines de données et au déploiement Docker.',
              ctaWork:'Voir les projets', ctaContact:'Me contacter', name:'Oussama Osseili'
            },
            stats:{projects:'projets', years:'années d’études', domains:'domaines clés'},
            work:{title:'Mes projets', subtitle:'Filtrez par domaine ou cherchez par techno.',
                  search:'Rechercher…', empty:'Aucun projet trouvé.'},
            services:{
              title:'Services',
              software:{title:'Software',desc:'Apps full-stack (Spring/Django + React), auth RBAC, CRUD, tests, docs.'},
              data:{title:'Data & AI',desc:'ETL/EDA, baselines ML (scikit-learn), rapports et notebooks reproductibles.'},
              devops:{title:'Cloud & DevOps',desc:'Docker/Compose, CI/CD GitHub Actions, déploiements simples.'}
            },
            about:{title:'À propos',bio:'Étudiant ingénieur MIAGE (EMSI Rabat). Intérêt pour Software, Data/AI, Cloud/DevOps et ERP/BPMN. Passionné par l’analytique sportive.',
                   education:'Éducation', skills:'Compétences', certs:'Certifications', experience:'Expérience'},
            contact:{title:'On travaille ensemble ?', desc:'Disponible pour stages, alternances et projets freelance.',
                     form:{name:'Votre nom', email:'Votre email', msg:'Votre message', send:'Envoyer'}, sent:'Message simulé ✌️'},
            play:{title:'Petit jeu (juste pour le fun)', desc:'Attrapez les orbes qui tombent. Chaque orbe = +1.',
                  start:'Démarrer', pause:'Pause'}
          },
          en:{
            nav:{work:'Work',services:'Services',about:'About',contact:'Contact',play:'Play'},
            hero:{
              hello:'Welcome to the Factory',
              title:'MIAGE — Software · Data/AI · Cloud/DevOps · ERP',
              subtitle:'I ship clean, documented and reproducible work — from Spring/Django backends to data pipelines and Docker deploys.',
              ctaWork:'See projects', ctaContact:'Contact me', name:'Oussama Osseili'
            },
            stats:{projects:'projects', years:'years in program', domains:'core domains'},
            work:{title:'My work', subtitle:'Filter by area or search by tech.',
                  search:'Search…', empty:'No projects found.'},
            services:{
              title:'Services',
              software:{title:'Software',desc:'Full-stack apps (Spring/Django + React), RBAC auth, CRUD, tests, docs.'},
              data:{title:'Data & AI',desc:'ETL/EDA, ML baselines (scikit-learn), reproducible reports/notebooks.'},
              devops:{title:'Cloud & DevOps',desc:'Docker/Compose, GitHub Actions CI/CD, simple deploys.'}
            },
            about:{title:'About',bio:'MIAGE engineering student (EMSI Rabat). Interested in Software, Data/AI, Cloud/DevOps and ERP/BPMN. Passionate about football analytics.',
                   education:'Education', skills:'Skills', certs:'Certifications', experience:'Experience'},
            contact:{title:'Let’s work together', desc:'Open to internships, part-time and freelance.',
                     form:{name:'Your name', email:'Your email', msg:'Your message', send:'Send'}, sent:'Message (simulated) ✌️'},
            play:{title:'Tiny game (for fun)', desc:'Catch the falling orbs. Each orb = +1.',
                  start:'Start', pause:'Pause'}
          }
        },

        init(){
          // theme
          document.documentElement.classList.toggle('dark', this.theme==='dark');
          // language
          this.t = this.dict[this.lang];
          this.applyFilters();
          // animate counters when hero enters view
          const statsEl = document.querySelector('#about') || document.body;
          const heroEl = document.querySelector('section'); // first section
          const io = new IntersectionObserver((entries)=>{
            entries.forEach(e=>{
              if(e.isIntersecting && !this.counterSeen){
                this.counterSeen = true;
                this.animateCounters();
              }
            })
          },{threshold:.3});
          io.observe(heroEl);
          // play game setup
          this.gameInit();
        },

        toggleTheme(){
          this.theme = (this.theme==='light') ? 'dark' : 'light';
          localStorage.setItem('theme', this.theme);
          document.documentElement.classList.toggle('dark', this.theme==='dark');
        },
        toggleLang(){
          this.lang = (this.lang==='fr') ? 'en' : 'fr';
          this.t = this.dict[this.lang];
        },

        // counters
        animateCounters(){
          const dur=1200, start=performance.now();
          const from={c1:0,c2:0,c3:0}, to={c1:this.target.count1,c2:this.target.count2,c3:this.target.count3};
          const step=(t)=>{
            const k=Math.min(1,(t-start)/dur);
            const ease=k<.5?4*k*k*k:1-Math.pow(-2*k+2,3)/2;
            this.c.count1 = Math.floor(from.c1 + (to.c1-from.c1)*ease);
            this.c.count2 = Math.floor(from.c2 + (to.c2-from.c2)*ease);
            this.c.count3 = Math.floor(from.c3 + (to.c3-from.c3)*ease);
            if(k<1) requestAnimationFrame(step);
          };
          requestAnimationFrame(step);
        },

        // filtering
        setFilter(c){ this.filter=c; this.applyFilters(); },
        applyFilters(){
          const q = this.q.trim().toLowerCase();
          const f = this.filter;
          this.visible = this.projects.filter(p=>{
            const mF = (f==='Tous' || f==='All') ? true : p.area===f;
            const mQ = !q || p.title.toLowerCase().includes(q) || p.tech.join(' ').toLowerCase().includes(q);
            return mF && mQ;
          });
        },

        // Game (tiny)
        game:{ctx:null,W:0,H:0,orbs:[],score:0,run:false},
        gameInit(){
          const c=document.getElementById('game'); if(!c) return;
          const ctx=c.getContext('2d'); this.game.ctx=ctx;
          const resize=()=>{ c.width=c.clientWidth; c.height=c.clientHeight; this.game.W=c.width; this.game.H=c.height; };
          new ResizeObserver(resize).observe(c); resize();
          c.addEventListener('mousemove',(e)=>{ this.game.mx=e.offsetX; this.game.my=e.offsetY; });
          const loop=()=>{
            if(this.game.run){ this.gameStep(); this.gameDraw(); }
            requestAnimationFrame(loop);
          }; loop();
        },
        gameStart(){
          this.game.score=0; this.game.orbs=[]; this.game.run=true;
        },
        gamePause(){ this.game.run=false; },
        gameSpawn(){
          const r=8+Math.random()*10;
          this.game.orbs.push({x:Math.random()*this.game.W, y:-20, r, v:1.5+Math.random()*2});
        },
        gameStep(){
          if(Math.random()<0.05) this.gameSpawn();
          this.game.orbs.forEach(o=>{ o.y+=o.v; });
          this.game.orbs = this.game.orbs.filter(o=>{
            const hit = this.game.mx && Math.hypot(o.x-this.game.mx, o.y-this.game.my)<(o.r+16);
            if(hit){ this.game.score++; return false; }
            return o.y<this.game.H+30;
          });
        },
        gameDraw(){
          const {ctx,W,H}=this.game;
          ctx.clearRect(0,0,W,H);
          ctx.fillStyle='rgba(255,255,255,.06)'; ctx.fillRect(0,0,W,H);
          // cursor
          if(this.game.mx){ ctx.beginPath(); ctx.arc(this.game.mx,this.game.my,16,0,Math.PI*2); ctx.strokeStyle='rgba(99,102,241,.9)'; ctx.lineWidth=2; ctx.stroke(); }
          // orbs
          this.game.orbs.forEach(o=>{
            const g=ctx.createRadialGradient(o.x-2,o.y-2,1,o.x,o.y,o.r);
            g.addColorStop(0,'rgba(236,72,153,.9)'); g.addColorStop(1,'rgba(99,102,241,.6)');
            ctx.fillStyle=g; ctx.beginPath(); ctx.arc(o.x,o.y,o.r,0,Math.PI*2); ctx.fill();
          });
          // score
          ctx.fillStyle='white'; ctx.font='bold 14px Inter'; ctx.fillText('Score: '+this.game.score, 10, 18);
        }
      }
    }
  </script>
</body>
</html>
